INSTALLATION_DIR=$1
BINARY_VERSION=<%= binary_version %>
DEST_DIR=$INSTALLATION_DIR/python-${BINARY_VERSION}
FILENAME=Python-${BINARY_VERSION}.tgz
TAR_URL=https://www.python.org/ftp/python/${BINARY_VERSION}/$FILENAME
APP_DIR=/app
PREFIX=$APP_DIR/.heroku/vendor

template_steps() {

  mkdir -p $APP_DIR/.heroku
  ln -s $INSTALLATION_DIR $PREFIX

  ./configure --prefix=${PREFIX} --enable-shared --with-ensurepip=no
  make -j 3 install

  # For python3 only:
  cd $INSTALLATION_DIR/bin
  if ! [ -f ./python ]; then
    ln -s ./python3 ./python
  fi
}

main "$@"
